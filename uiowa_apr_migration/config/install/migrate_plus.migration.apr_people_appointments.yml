langcode: en
status: true
dependencies:
  enforced:
    module:
      - uiowa_apr_migration
id: apr_people_appointments
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags: null
migration_group: apr_people_migrations
label: 'APR People Appointments'
source:
  plugin: url
  data_fetcher_plugin: http
  data_parser_plugin: json
  include_raw_data: true
  headers:
    Accept: application/json
  urls: 'https://test.its.uiowa.edu/facadmin/api/listing/?key=iashdfi7sdf74evah23&population_id=1'
  item_selector: 0
  fields:
    -
      name: id
      label: Appointment ID
      selector: admin_perms/0/id
    -
      name: type
      label: Appointment Type
      selector: admin_perms/0/appointment_type
    -
      name: rank
      label: Appointment Rank
      selector: admin_perms/0/rank
    -
      name: department
      label: Appointment Department
      selector: admin_perms/0/dep
    -
      name: college
      label: Appointment College
      selector: admin_perms/0/college
    -
      name: division
      label: Appointment Division
      selector: admin_perms/0/division
    -
      name: person_type
      label: Appointment Person Type
      selector: admin_perms/0/person_type
  ids:
      id:
        type: string
destination:
  plugin: 'entity_reference_revisions:paragraph'
process:
  type:
    plugin: default_value
    default_value: apr_profile_appointments
#  admin_perms:
#    plugin: sub_process
#    source: admin_perms
#    process:
#      apr_profile_appointments_id:
#        -
#          plugin: skip_on_empty
#          method: process
#          source: admin_perms
#        plugin: extract
#        source: admin_perms
#        index:
#          - id
#      apr_profile_appointments_type:
#        plugin: extract
#        source: admin_perms
#        index:
#          - appointment_type
#      apr_profile_appointments_rank:
#        plugin: extract
#        source: admin_perms
#        index:
#          - rank
#      apr_profile_appointments_dept:
#        plugin: extract
#        source: admin_perms
#        index:
#          - dep
#      apr_profile_appointments_college:
#        plugin: extract
#        source: admin_perms
#        index:
#          - college
#      apr_profile_appointments_div:
#        plugin: extract
#        source: admin_perms
#        index:
#          - division
#      apr_profile_appointments_ptype:
#        plugin: extract
#        source: admin_perms
#        index:
#          - person_type
  apr_profile_appointments_id: id
  apr_profile_appointments_type: type
  apr_profile_appointments_rank: rank
  apr_profile_appointments_dept: department
  apr_profile_appointments_college: college
  apr_profile_appointments_div: division
  apr_profile_appointments_ptype: person_type
migration_dependencies: null
